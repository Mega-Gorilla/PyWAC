# PyWAC ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

PyWACãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¸ã‚ˆã†ã“ãã€‚ã“ã®ãƒ•ã‚©ãƒ«ãƒ€ã«ã¯ã€ã™ã¹ã¦ã®æŠ€è¡“ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã€ç§»è¡Œã‚¬ã‚¤ãƒ‰ã€ãŠã‚ˆã³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æƒ…å ±ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚

## ğŸ“š ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ§‹é€ 

### ã‚³ã‚¢ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- [`API_Reference.md`](./API_Reference.md) - å®Œå…¨ãªAPIãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ï¼ˆv0.4.1å¯¾å¿œï¼‰
- [`Process_Loopback_API_Research.md`](./Process_Loopback_API_Research.md) - Windows Process Loopback APIèª¿æŸ»
- [`v0.4.1_implementation_summary.md`](./v0.4.1_implementation_summary.md) - **æœ€æ–°** ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•å®Ÿè£…ã‚µãƒãƒªãƒ¼

### ç§»è¡Œã‚¬ã‚¤ãƒ‰
- [`migrations/`](./migrations/) - ãƒãƒ¼ã‚¸ãƒ§ãƒ³å›ºæœ‰ã®ç§»è¡Œã‚¬ã‚¤ãƒ‰
  - [`v0.4.1-event-driven.md`](./migrations/v0.4.1-event-driven.md) - ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•å®Ÿè£…ï¼ˆæœ€æ–°ï¼‰
  - [`v0.4.0-queue-architecture.md`](./migrations/v0.4.0-queue-architecture.md) - ã‚­ãƒ¥ãƒ¼ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ç§»è¡Œ
  - [`v0.3.0-audiodata.md`](./migrations/v0.3.0-audiodata.md) - AudioDataã‚¯ãƒ©ã‚¹å°å…¥

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†
- [`Version_Management_Strategy.md`](./Version_Management_Strategy.md) - ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†æˆ¦ç•¥
- [`Documentation_Structure.md`](./Documentation_Structure.md) - ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ§‹æˆ

## ğŸ”„ ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†

### ç¾åœ¨ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³: 0.4.1ï¼ˆã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•ã‚­ãƒ£ãƒ—ãƒãƒ£ï¼‰

**v0.4.1ã®ä¸»ãªå¤‰æ›´ç‚¹:**
- âœ… **WASAPIã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•**ã§CPUä½¿ç”¨ç‡ < 1%ã‚’å®Ÿç¾
- âœ… SetEventHandle APIã§å®Œå…¨ãªã‚¼ãƒ­ãƒãƒ¼ãƒªãƒ³ã‚°
- âœ… è‡ªå‹•ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã§100%ã®äº’æ›æ€§ç¶­æŒ
- âœ… ã‚¤ãƒ™ãƒ³ãƒˆåŠ¹ç‡100%ï¼ˆ499ã‚¤ãƒ™ãƒ³ãƒˆã€0ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆï¼‰
- âœ… Process Loopback APIã¨ã®å®Œå…¨ãªçµ±åˆ

**v0.4.0ã®æ”¹å–„ç‚¹:**
- âœ… ã‚­ãƒ¥ãƒ¼ãƒ™ãƒ¼ã‚¹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãŒGILå•é¡Œã‚’è§£æ±º
- âœ… ã‚¹ãƒ¬ãƒƒãƒ‰ã‚»ãƒ¼ãƒ•ã‚­ãƒ¥ãƒ¼ã§ãƒ‡ãƒ¼ã‚¿æå¤±ã‚¼ãƒ­
- âœ… Spotifyã€Chromeç­‰ã§æœ¬ç•ªå¯¾å¿œ

ãƒãƒ¼ã‚¸ãƒ§ãƒ³å›ºæœ‰ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆï¼š
- ä½¿ç”¨ã—ã¦ã„ã‚‹ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®gitã‚¿ã‚°ã‚’ç¢ºèª
- ç§»è¡Œã‚¬ã‚¤ãƒ‰ã¯`docs/migrations/`ã«ã‚ã‚Šã¾ã™
- ç ´å£Šçš„å¤‰æ›´ã¯[`CHANGELOG.md`](../CHANGELOG.md)ã«è¨˜è¼‰

## ğŸš¨ é‡è¦ï¼šã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®å¤‰æ›´

**v0.4.0ã¯å•é¡Œã®ã‚ã‚‹ãƒãƒ¼ãƒªãƒ³ã‚°ã¨ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’ç½®ãæ›ãˆã‚‹ã‚­ãƒ¥ãƒ¼ãƒ™ãƒ¼ã‚¹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚’å°å…¥:**

```python
# å¤ã„ (v0.3.x) - é«˜CPUä½¿ç”¨ç‡
import process_loopback_v2 as loopback
capture = loopback.ProcessCapture()
# 30-100%ã®CPUä½¿ç”¨ç‡ã§ãƒãƒ¼ãƒªãƒ³ã‚°

# æ–°ã—ã„ (v0.4.0) - åŠ¹ç‡çš„ãªã‚­ãƒ¥ãƒ¼ãƒ™ãƒ¼ã‚¹
from pywac.queue_streaming import QueueBasedStreamingCapture
capture = QueueBasedStreamingCapture(process_id=pid)
# ã‚¢ãƒ€ãƒ—ãƒ†ã‚£ãƒ–ãƒãƒ¼ãƒªãƒ³ã‚°ã§ < 5%ã®CPUä½¿ç”¨ç‡
```

ç§»è¡Œã®è©³ç´°ã¯[`migrations/v0.4.0-queue-architecture.md`](./migrations/v0.4.0-queue-architecture.md)ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

## ğŸ“ æ›´æ–°ãƒãƒ¼ãƒˆã®å ´æ‰€

æ›´æ–°ãƒãƒ¼ãƒˆã¨ãƒªãƒªãƒ¼ã‚¹æƒ…å ±ã¯æ¬¡ã®ã‚ˆã†ã«ç®¡ç†ã•ã‚Œã¦ã„ã¾ã™ï¼š

1. **CHANGELOG.md**ï¼ˆãƒ«ãƒ¼ãƒˆï¼‰ - ãƒ¦ãƒ¼ã‚¶ãƒ¼å‘ã‘ã®å¤‰æ›´
2. **GitHubãƒªãƒªãƒ¼ã‚¹** - ãƒã‚¤ãƒŠãƒªä»˜ãã®è©³ç´°ãªãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆ
3. **ç§»è¡Œã‚¬ã‚¤ãƒ‰** - ã‚¹ãƒ†ãƒƒãƒ—ãƒã‚¤ã‚¹ãƒ†ãƒƒãƒ—ã®ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰æ‰‹é †
4. **APIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ** - ãƒãƒ¼ã‚¸ãƒ§ãƒ³å›ºæœ‰ã®APIå¤‰æ›´

## ğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ãƒªãƒ³ã‚¯

### é–‹å§‹æ–¹æ³•
- [æœ€æ–°APIãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹](./API_ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹.md)
- [ã‚­ãƒ¥ãƒ¼å®Ÿè£…æ¦‚è¦](./ã‚­ãƒ¥ãƒ¼ãƒ™ãƒ¼ã‚¹å®Ÿè£…ã‚µãƒãƒªãƒ¼.md)

### ç§»è¡Œ
- [v0.3.xã‹ã‚‰v0.4.0ã¸ã®ç§»è¡Œ](./migrations/v0.4.0-queue-architecture.md)
- [v0.2.xã‹ã‚‰v0.3.0ã¸ã®ç§»è¡Œ](./migrations/v0.3.0-audiodata.md)

### æŠ€è¡“çš„æ·±æ˜ã‚Š
- [ã‚­ãƒ¥ãƒ¼ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆ](./queue_based_implementation_plan.md)
- [å•é¡Œè§£æ±ºãƒ¬ãƒãƒ¼ãƒˆ](./v0.4.0_problem_resolution.md)
- [å…ƒã®å•é¡Œåˆ†æ](./pywac_dataflow_and_issues.md)

## ğŸ“Š ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ¡ãƒˆãƒªã‚¯ã‚¹ï¼ˆv0.4.1ï¼‰

ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•å®Ÿè£…ã®æˆæœï¼š
- **CPUä½¿ç”¨ç‡**: < 1%ï¼ˆv0.4.0ã§ã¯3-5%ã€v0.3.xã§ã¯30-100%ï¼‰
- **ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·**: ä¸€å®šã®~10ms
- **ãƒ‡ãƒ¼ã‚¿æå¤±**: 0%ï¼ˆãƒ‰ãƒ­ãƒƒãƒ—ã•ã‚ŒãŸãƒãƒ£ãƒ³ã‚¯ãªã—ï¼‰
- **ã‚¤ãƒ™ãƒ³ãƒˆåŠ¹ç‡**: 100%ï¼ˆå®Œå…¨ãªã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•ï¼‰
- **ãƒ¡ãƒ¢ãƒª**: æœ‰ç•Œã‚­ãƒ¥ãƒ¼ã§æœ€å°é™ã®ã‚ªãƒ¼ãƒãƒ¼ãƒ˜ãƒƒãƒ‰
- **ã‚¹ãƒ¬ãƒƒãƒ‰å®‰å…¨æ€§**: å®Œå…¨ãªGILæº–æ‹ 

Spotifyã‚­ãƒ£ãƒ—ãƒãƒ£ã®å®Ÿä¾‹ï¼š
```
éŒ²éŸ³æ™‚é–“: 5.02ç§’
ç·ãƒãƒ£ãƒ³ã‚¯æ•°: 499
ãƒ‰ãƒ­ãƒƒãƒ—ã•ã‚ŒãŸãƒãƒ£ãƒ³ã‚¯: 0
åŠ¹ç‡: 1.04 chunks/poll
CPUä½¿ç”¨ç‡: < 5%
```

## ğŸ“¦ ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æ¦‚è¦

### ã‚³ã‚¢ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼ˆv0.4.0ï¼‰
- `process_loopback_queue` - C++ã‚­ãƒ¥ãƒ¼ãƒ™ãƒ¼ã‚¹ã‚­ãƒ£ãƒ—ãƒãƒ£ï¼ˆæ¨å¥¨ï¼‰
- `pywac.queue_streaming` - Pythonã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
- `pywac.audio_data` - çµ±ä¸€ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªãƒ‡ãƒ¼ã‚¿ã‚³ãƒ³ãƒ†ãƒŠ

### éæ¨å¥¨ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
- `process_loopback_v2` - ãƒãƒ¼ãƒªãƒ³ã‚°ãƒ™ãƒ¼ã‚¹ï¼ˆé«˜CPUä½¿ç”¨ç‡ï¼‰
- `process_loopback_v3` - ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ãƒ™ãƒ¼ã‚¹ï¼ˆGILå•é¡Œï¼‰

## ğŸ” æƒ…å ±ã®æ¤œç´¢

- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å•é¡Œ**: [`ã‚­ãƒ¥ãƒ¼ãƒ™ãƒ¼ã‚¹å®Ÿè£…ã‚µãƒãƒªãƒ¼.md`](./ã‚­ãƒ¥ãƒ¼ãƒ™ãƒ¼ã‚¹å®Ÿè£…ã‚µãƒãƒªãƒ¼.md)ã‚’å‚ç…§
- **APIå¤‰æ›´**: [`API_ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹.md`](./API_ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹.md)ã‚’ç¢ºèª
- **ç§»è¡Œãƒ˜ãƒ«ãƒ—**: [`migrations/`](./migrations/)ã‚’å‚ç…§
- **ä½¿ç”¨ä¾‹**: `examples/`ã¨ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç¢ºèª
- **æŠ€è¡“è©³ç´°**: ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’èª­ã‚€

## ğŸ› æ—¢çŸ¥ã®å•é¡Œã¨è§£æ±ºç­–

### v0.3.xä»¥å‰
- âŒ é«˜CPUä½¿ç”¨ç‡ï¼ˆ30-100%ï¼‰ - v0.4.0ã§ä¿®æ­£
- âŒ ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã§ã®GILã‚¯ãƒ©ãƒƒã‚·ãƒ¥ - v0.4.0ã§ä¿®æ­£
- âŒ ãƒãƒ¼ãƒªãƒ³ã‚°ã§ã®ãƒ‡ãƒ¼ã‚¿æå¤± - v0.4.0ã§ä¿®æ­£

### v0.4.0
- âœ… ã™ã¹ã¦ã®ä¸»è¦ãªå•é¡ŒãŒè§£æ±ºæ¸ˆã¿
- âœ… æœ¬ç•ªå¯¾å¿œã®å®Ÿè£…
- âœ… å®Ÿéš›ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ãƒ†ã‚¹ãƒˆæ¸ˆã¿

## ğŸ“ˆ ãƒãƒ¼ã‚¸ãƒ§ãƒ³å±¥æ­´

- **v0.4.1** - ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•å®Ÿè£…ã€< 1% CPUã€SetEventHandleçµ±åˆ
- **v0.4.0** - ã‚­ãƒ¥ãƒ¼ãƒ™ãƒ¼ã‚¹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã€< 5% CPUã€GILã‚»ãƒ¼ãƒ•
- **v0.3.0** - AudioDataã‚¯ãƒ©ã‚¹ã€çµ±ä¸€ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆå‡¦ç†
- **v0.2.0** - Process Loopback APIå®Ÿè£…
- **v0.1.0** - WASAPIã‚µãƒãƒ¼ãƒˆä»˜ãåˆæœŸãƒªãƒªãƒ¼ã‚¹